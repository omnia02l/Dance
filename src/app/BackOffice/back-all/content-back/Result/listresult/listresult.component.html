<!-- result.component.html -->
<div class="container">
  <h2>RÃ©sultats</h2>
  <div style="max-width: 600px; margin: auto; padding: 20px; box-shadow: 0 4px 8px rgba(0,0,0,0.1); border-radius: 8px; background: #fff;">
    <div style="display: flex; justify-content: space-between; margin-bottom: 20px;">
      <div style="flex-grow: 1; margin-right: 10px;">
        <label for="start-date" style="display: block; margin-bottom: 5px;">Start Date:</label>
        <input id="start-date" type="date" [(ngModel)]="startDate" style="width: 100%; padding: 8px; border-radius: 4px; border: 1px solid #ccc;"/>
      </div>
      <div style="flex-grow: 1;">
        <label for="end-date" style="display: block; margin-bottom: 5px;">End Date:</label>
        <input id="end-date" type="date" [(ngModel)]="endDate" style="width: 100%; padding: 8px; border-radius: 4px; border: 1px solid #ccc;"/>
      </div>
    </div>
    <button (click)="getResultsBetweenDates()" style="width: 100%; padding: 10px 15px; border: none; border-radius: 4px; background-color: #007bff; color: white; cursor: pointer;">
      Search
    </button>
  </div>
  <p-table [value]="results" responsiveLayout="scroll" [paginator]="true" [rows]="10">


    <ng-template pTemplate="header">
      <tr>
        <th>ID</th>
        <th>Score</th>
        <th>Number of Votes</th>
        <th>Date</th>
        <th>Date</th>
        <th>Dislike</th>
        <th>Actions</th>
      </tr>
    </ng-template>
    <ng-template pTemplate="body" let-result>
      <tr>
        <td>{{ result.idResultat }}</td>
        <td>{{ result.resultat }}</td>
        <td>{{ result.nombresvotes }}</td>
        <td>{{ result.dateR | date:'short' }}</td>
        <td>{{ result.likes}}</td>
        <td>{{ result.dislikes}}</td>


        <td>
          <button pButton type="button" icon="pi pi-chart-bar" (click)="showLikesDislikes(result.idResultat)" style="margin-right: 10px;"></button>

          <button pButton type="button" icon="pi pi-pencil" (click)="editResult(result)" style="margin-right: 10px;"></button>

          <button pButton type="button" icon="pi pi-trash" (click)="deleteResult(result.idResultat)"></button>
        </td>
      </tr>

    </ng-template>

  </p-table>
  <p-dialog header="Edit Result" [(visible)]="editMode" [modal]="true" [style]="{width: '50vw'}">
    <div *ngIf="editingResult">
      <div class="p-fluid">
        <div class="p-field">
          <label for="score">Score</label>
          <input id="score" type="text" pInputText [(ngModel)]="editingResult.resultat" />
        </div>
        <div class="p-field" style="margin-bottom: 1em;">
          <label for="votes">Number of Votes</label>
          <input id="votes" type="number" pInputText [(ngModel)]="editingResult.nombresvotes" />
        </div>
        <div class="p-field">
          <label for="date">Date</label>
          <input id="date" type="date" pInputText [(ngModel)]="editingResult.dateR" />
        </div>


      </div>
      <p-footer>
        <button pButton label="Save" icon="pi pi-check" (click)="updateResult(editingResult)" style="margin-right: 0.5em;"></button>
        <button pButton label="Back" icon="pi pi-times" (click)="cancelEdit()" class="p-button-secondary"></button>
      </p-footer>
    </div>
  </p-dialog>
  <!-- Below your table or inside a modal/dialog -->
  <p-dialog header="Likes and Dislikes" [(visible)]="displayLikesDislikes" [modal]="true" [style]="{width: '50vw'}">
    <app-like-dislike-chart *ngIf="selectedResultId" [resultId]="selectedResultId"></app-like-dislike-chart>
  </p-dialog>

</div>

