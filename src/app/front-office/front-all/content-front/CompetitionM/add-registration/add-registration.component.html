<!-- add-registration.component.html -->

<div class="container mt-5">
  <div class="row justify-content-center">
    <div class="col-md-12">
      <div class="card">
        <div class="card-body">
          <h5 class="card-title">Add Registration</h5>
          <form [formGroup]="registrationForm" (ngSubmit)="onSubmit()" class="custom-form custom-form-angular">

            <!-- Première partie du formulaire -->
            <ng-container *ngIf="currentFormPart === 1" >
              <div class="mb-3" class="form-part-1">
                <label for="videolink" class="form-label">Video Link:</label>
                <input type="text" id="videolink" class="form-control" formControlName="videolink" required>
                <div *ngIf="registrationForm.get('videolink')?.hasError('required')" class="text-danger"> Video Link is required. </div>
              </div>



              <button type="button" class="btn-next mt-3" (click)="nextFormPart()">Next</button>
            </ng-container>

            <!-- Deuxième partie du formulaire -->
            <ng-container *ngIf="currentFormPart === 2" >
              <div formGroupName="team" class="form-part-2">
                <div class="mb-3">
                  <label for="teamname" class="form-label">Team Name:</label>
                  <input type="text" id="teamname" class="form-control" formControlName="teamname">
                  <div *ngIf="registrationForm.get('team.teamname')?.hasError('required')" class="text-danger"> Team Name is required. </div>
                  <div *ngIf="registrationForm.get('team.teamname')?.hasError('minlength')" class="text-danger"> Team Name must be at least 3 characters long. </div>
                  <div *ngIf="registrationForm.get('team.teamname')?.hasError('maxlength')" class="text-danger"> Team Name cannot be more than 10 characters long. </div>
                  <div *ngIf="registrationForm.get('team.teamname')?.hasError('pattern')" class="text-danger"> Team Name should contain only letters and no numbers. </div>
                </div>

                <div class="mb-3">
                  <label for="leadername" class="form-label">Leader Name:</label>
                  <input type="text" id="leadername" class="form-control" formControlName="leadername">
                  <div *ngIf="registrationForm.get('team.leadername')?.hasError('required')" class="text-danger"> Leader Name is required. </div>
                </div>

                <div class="mb-3">
                  <label for="tdescreption" class="form-label">Team Description:</label>
                  <input type="text" id="tdescreption" class="form-control" formControlName="tdescreption">
                </div>

                <div class="mb-3">
                  <label for="teamtype" class="form-label">Team Type:</label>
                  <select id="teamtype" class="form-control" formControlName="teamtype">
                    <option value="Solo">Solo</option>
                    <option value="Group">Group</option>
                  </select>
                </div>

                <div class="mb-3">
                  <label for="skilllevel" class="form-label">Skill Level:</label>
                  <select id="skilllevel" class="form-control" formControlName="skilllevel">
                    <option value="Beginner">Beginner</option>
                    <option value="Professional">Professional</option>
                    <option value="Intermediate">Intermediate</option>
                  </select>
                </div>
              </div>

              <button type="button" class="btn-return mt-3" (click)="returnToFormPart(1)">Return</button>
              <button type="button" class="btn-next mt-3" (click)="nextFormPart()">Next</button>
            </ng-container>

 <!-- Troisième partie du formulaire -->
<ng-container *ngIf="currentFormPart === 3"   >
  <div class="table-responsive">
    <table class="schedule-table custom-table"> <!-- Ajout de la classe custom-table -->
      <!-- En-tête du tableau -->
      <thead>
        <tr>
          <th>nb</th>
          <th>First Name</th>
          <th>Last Name</th>
          <th>Date of Birth</th>
          <th>Gender</th>
          <th>Email</th>
          <th>delete dancer</th>
        </tr>
      </thead>
      <!-- Corps du tableau -->
      <tbody formArrayName="dancers">
        <tr *ngFor="let dancer of dancers.controls; let i = index" [formGroupName]="i">
          <td>{{ i + 1 }}</td>
          <td>
            <input type="text" class="form-control" formControlName="dfirstname" required>
            <div *ngIf="dancer.get('dfirstname')?.hasError('required')" class="text-danger"> First Name is required. </div>
          </td>
          <td>
            <input type="text" class="form-control" formControlName="dlastname" required>
            <div *ngIf="dancer.get('dlastname')?.hasError('required')" class="text-danger"> Last Name is required. </div>
          </td>
          <td>
            <input type="date" class="form-control" formControlName="dateofbirthd" required>
          </td>
          <td>
            <select formControlName="dgender" required>
              <option value="man">Man</option>
              <option value="women">Women</option>
              <option value="other">Other</option>
            </select>
          </td>
          <td>
            <input type="email" class="form-control" formControlName="demail" required>
            <div *ngIf="dancer.get('demail')?.hasError('required')" class="text-danger"> Email is required. </div>
            <div *ngIf="dancer.get('demail')?.hasError('email')" class="text-danger"> Please enter a valid email address. </div>
          </td>
          <td>
            <div class="add-dancer-section">
              <span class="add-dancer-title">remove Dancer </span>
            <button type="button" class="btn btn-pink btn-circle" (click)="removeDancerField(i)"><span class="plus-symbol">-</span></button>
            </div>
          </td>
        </tr>
      </tbody>
    </table>
  </div>



  <div class="add-dancer-section">
    <span class="add-dancer-title">Add Dancer </span>
    <button type="button" class="btn btn-pink btn-circle" (click)="addDancer()">
      <span class="plus-symbol">+</span>
    </button>
  </div>

  <!-- Bouton de retour et messages d'erreur -->
  <button type="button" class="btn-return mt-3" (click)="returnToFormPart(2)">Return</button>

  <div *ngIf="registrationForm.controls['teamError'].value" class="text-danger">
    {{ registrationForm.controls['teamError'].value }}
  </div>

  <button type="submit" class="btn btn-primary mt-3">Add Registration</button>
</ng-container>


